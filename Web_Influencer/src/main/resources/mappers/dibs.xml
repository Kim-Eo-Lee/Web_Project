<?xml version="1.0" encoding="UTF-8"?>
<!-- mappers/hrm.xml -->
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
                        
<mapper namespace="com.ssafy.happyhouse.dao.DibsMapper"> <!-- mybatis는 namespace필수!! -->
	
	<select id="selectAll" resultType="com.ssafy.happyhouse.dto.HouseDealDTO" >
      SELECT d.no,d.dong,d.AptName as aptname ,d.code,d.dealAmount,d.buildYear,d.dealYear,d.dealMonth,d.dealDay,d.area,d.floor,d.jibun
      from housedeal as d 
      where no IN ( select aptno from dibs
      				where userid = #{userid});
                
     </select>
    <select id="selectAptList" resultType="com.ssafy.happyhouse.dto.HouseDealDTO" >
      select  from housedeal
      where no = #{no}           
     </select>

	<insert id="insFavorite" parameterType="java.util.HashMap">
		insert into dibs (userid, aptno) values (#{userid},   #{no})
	</insert>

	<delete id="delFavorite" parameterType="java.util.HashMap">
		DELETE FROM dibs
		WHERE userid = #{userid}
		AND aptno = #{no}
	</delete>

</mapper>



